# P28: í…ŒìŠ¤íŠ¸ ì²´ê³„í™” ë° í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ êµ¬ì¶• (2025-11-15)

## ê°œìš”

í˜„ì¬ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ì‚°ì¬í•œ 17ê°œì˜ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¶„ì„í•˜ê³ , pytest ê¸°ë°˜ì˜ ì²´ê³„ì ì¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸/í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ë¥¼ `tests/` ë””ë ‰í† ë¦¬ì— êµ¬ì¶•í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤.

---

## í˜„í™© ë¶„ì„

### ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒŒì¼ ëª©ë¡ (17ê°œ, ì´ 1,349ì¤„)

#### 1. ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸ (6ê°œ)
- `test_acc_steps.py` (77ì¤„): ACC ë‹¨ê³„ë³„ ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸
- `test_integration.py` (69ì¤„): CSV â†’ ACC ì „ì²´ íŒŒì´í”„ë¼ì¸ í†µí•© í…ŒìŠ¤íŠ¸
- `test_concentric.py` (77ì¤„): ë™ì‹¬ì› êµ¬ì¡° ê²€ì¦
- `test_linkage_abc.py` (79ì¤„): Linkage similarity ê³„ì‚° ê²€ì¦
- `test_abc_example.py` (43ì¤„): 3-ì˜ì—­ ê°„ë‹¨í•œ ì˜ˆì œ
- `test_nested_structure.py` (29ì¤„): ì¤‘ì²© êµ¬ì¡° í…ŒìŠ¤íŠ¸

#### 2. ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ (1ê°œ)
- `verify_concentric_full.py` (67ì¤„): 6-ì˜ì—­ ë™ì‹¬ì› ê²€ì¦

#### 3. GUI í…ŒìŠ¤íŠ¸ (5ê°œ)
- `test_area_editor.py` (134ì¤„): Area í¸ì§‘ê¸° ë‹¤ì´ì–¼ë¡œê·¸ í…ŒìŠ¤íŠ¸
- `test_empty_area_list.py` (134ì¤„): ë¹ˆ area list ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- `test_step_dendro.py` (80ì¤„): Dendrogram ë‹¨ê³„ ì‹œê°í™” í…ŒìŠ¤íŠ¸
- `test_dialog.py` (44ì¤„): ê¸°ë³¸ ë‹¤ì´ì–¼ë¡œê·¸ í…ŒìŠ¤íŠ¸
- `test_gui_simple.py` (31ì¤„): ê°„ë‹¨í•œ GUI í…ŒìŠ¤íŠ¸

#### 4. í™˜ê²½/ì˜ì¡´ì„± í…ŒìŠ¤íŠ¸ (5ê°œ)
- `test_pyqt5.py` (37ì¤„): PyQt5 import í…ŒìŠ¤íŠ¸
- `test_matplotlib_qt5.py` (71ì¤„): Matplotlib Qt5 ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
- `test_canvas_import.py` (73ì¤„): Canvas import í…ŒìŠ¤íŠ¸
- `test_clustering_steps.py` (53ì¤„): Clustering manager í…ŒìŠ¤íŠ¸
- `test_acc_with_log.py` (35ì¤„): ë¡œê¹… ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

#### 5. íŠ¹ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (1ê°œ)
- `test_merge_radii.py` (78ì¤„): Radii merge ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸

### ë¬¸ì œì 

1. **êµ¬ì¡° ì—†ìŒ**: ëª¨ë“  íŒŒì¼ì´ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ì‚°ì¬
2. **ì¼ê´€ì„± ë¶€ì¡±**: pytest/unittest í˜¼ìš©, ë„¤ì´ë° ë¶ˆì¼ì¹˜
3. **ì¤‘ë³µ ì½”ë“œ**: ìƒ˜í”Œ ë°ì´í„° ë°˜ë³µ ì •ì˜
4. **ì‹¤í–‰ ì–´ë ¤ì›€**: ê°œë³„ ì‹¤í–‰ë§Œ ê°€ëŠ¥, ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë¶ˆê°€
5. **CI/CD ë¯¸ì§€ì›**: GitHub Actions í†µí•© ì—†ìŒ
6. **ì»¤ë²„ë¦¬ì§€ ë¯¸ì¸¡ì •**: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì•Œ ìˆ˜ ì—†ìŒ

---

## í…ŒìŠ¤íŠ¸ ì²´ê³„í™” ê³„íš

### ëª©í‘œ

1. âœ… pytest ê¸°ë°˜ í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ êµ¬ì¶•
2. âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ / í†µí•© í…ŒìŠ¤íŠ¸ ë¶„ë¦¬
3. âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ ë‹¬ì„±
4. âœ… CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (GitHub Actions)
5. âœ… ë¬¸ì„œí™” ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py                 # pytest ì„¤ì •, fixtures
â”œâ”€â”€ test_data/                  # í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â”œâ”€â”€ sample_subordinate.csv
â”‚   â”œâ”€â”€ sample_inclusive.csv
â”‚   â”œâ”€â”€ invalid_asymmetric.csv
â”‚   â””â”€â”€ invalid_diagonal.csv
â”œâ”€â”€ unit/                       # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_acc_core.py        # acc_core.py í•¨ìˆ˜ë“¤
â”‚   â”œâ”€â”€ test_acc_core_new.py    # acc_core_new.py í•¨ìˆ˜ë“¤
â”‚   â”œâ”€â”€ test_acc_utils.py       # acc_utils.py í•¨ìˆ˜ë“¤
â”‚   â””â”€â”€ test_data_structures.py # DendroNode ë“±
â”œâ”€â”€ integration/                # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_pipeline.py        # CSV â†’ Dendrogram â†’ ACC
â”‚   â”œâ”€â”€ test_algorithm.py       # ì•Œê³ ë¦¬ì¦˜ ì „ì²´ íë¦„
â”‚   â””â”€â”€ test_validation.py      # ë°ì´í„° ê²€ì¦ íŒŒì´í”„ë¼ì¸
â”œâ”€â”€ gui/                        # GUI í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_main_window.py     # ë©”ì¸ ìœˆë„ìš°
â”‚   â”œâ”€â”€ test_matrix_widget.py   # Matrix í¸ì§‘
â”‚   â”œâ”€â”€ test_dendrogram_widget.py  # Dendrogram ì‹œê°í™”
â”‚   â”œâ”€â”€ test_acc_widget.py      # ACC ì‹œê°í™”
â”‚   â””â”€â”€ test_dialogs.py         # Area editor ë“±
â””â”€â”€ performance/                # ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (ì„ íƒ)
    â”œâ”€â”€ __init__.py
    â””â”€â”€ test_benchmark.py       # ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬
```

---

## í…ŒìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬ ë° ë‚´ìš©

### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)

**tests/unit/test_acc_core.py**:
- `DendroNode` ìƒì„± ë° ì†ì„±
- `find_cluster_in_dendro_by_members()`
- `average_pairwise_similarity()`
- `extract_clusters_from_dendro()`
- `decorate_clusters()`
- `place_first_cluster()`
- `add_area_to_cluster()`
- `merge_two_clusters()`

**tests/unit/test_acc_core_new.py**:
- `build_acc_iterative()` ê° ë‹¨ê³„
- `calculate_cluster_similarity()`
- Concentric circles êµ¬ì¡° ê²€ì¦
- Rotation-based merge ê²€ì¦

**tests/unit/test_acc_utils.py**:
- `similarity_to_distance()`
- `linkage_to_dendronode()`
- `matrix_to_dendrogram()`
- `validate_similarity_matrix()` - ëª¨ë“  ê²€ì¦ ê·œì¹™
- `dict_matrix_from_dataframe()`
- `build_acc_from_matrices()`

**tests/unit/test_data_structures.py**:
- `DendroNode` êµ¬ì¡°
- Members set ì—°ì‚°
- Tree traversal

### 2. í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)

**tests/integration/test_pipeline.py**:
- CSV ë¡œë“œ â†’ Dendrogram ìƒì„± â†’ ACC ìƒì„±
- ìƒ˜í”Œ ë°ì´í„° (6-ì˜ì—­) ì „ì²´ íŒŒì´í”„ë¼ì¸
- 3-ì˜ì—­ ê°„ë‹¨í•œ ì˜ˆì œ
- ë‹¤ì–‘í•œ clustering method (average, single, complete)

**tests/integration/test_algorithm.py**:
- ACC vs ACC2 ì•Œê³ ë¦¬ì¦˜ ë¹„êµ
- ë‹¨ê³„ë³„ ì§„í–‰ ê²€ì¦
- ìµœì¢… ê²°ê³¼ ì¼ê´€ì„±
- Concentric circles êµ¬ì¡° ë³´ì¡´

**tests/integration/test_validation.py**:
- ë¹„ëŒ€ì¹­ matrix ê±°ë¶€
- ëŒ€ê°ì„  != 1.0 ê±°ë¶€
- ë²”ìœ„ ì´ˆê³¼ ê°’ ê±°ë¶€
- ë¼ë²¨ ë¶ˆì¼ì¹˜ ê°ì§€

### 3. GUI í…ŒìŠ¤íŠ¸ (GUI Tests)

**tests/gui/test_main_window.py**:
- ìœˆë„ìš° ìƒì„± ë° ì´ˆê¸°í™”
- 3-ì—´ ë ˆì´ì•„ì›ƒ ê²€ì¦
- ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸

**tests/gui/test_matrix_widget.py**:
- CSV ë¡œë“œ
- Matrix í¸ì§‘ (upper triangleë§Œ)
- Area list í¸ì§‘
- íˆ´íŒ í‘œì‹œ

**tests/gui/test_dendrogram_widget.py**:
- Dendrogram ë Œë”ë§
- ìŠ¬ë¼ì´ë” ë‹¨ê³„ ì œì–´
- ìë™ ë§ˆì§€ë§‰ ë‹¨ê³„ ì´ë™
- ìš°í´ë¦­ ì´ë¯¸ì§€ ì €ì¥

**tests/gui/test_acc_widget.py**:
- ACC/ACC2 ì‹œê°í™”
- ë‹¨ê³„ë³„ í‘œì‹œ
- Branch swap (ACC2)
- Hover tooltip (ACC2)

**tests/gui/test_dialogs.py**:
- Area Editor ë‹¤ì´ì–¼ë¡œê·¸
- Add/Remove/Move ê¸°ëŠ¥
- ì…ë ¥ ê²€ì¦

### 4. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (Performance Tests, ì„ íƒ)

**tests/performance/test_benchmark.py**:
- 10ê°œ ì˜ì—­: < 1ì´ˆ
- 20ê°œ ì˜ì—­: < 2ì´ˆ
- 50ê°œ ì˜ì—­: < 10ì´ˆ
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¸¡ì •

---

## ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ë§¤í•‘

| ê¸°ì¡´ íŒŒì¼ | ìƒˆ ìœ„ì¹˜ | ë³€í™˜ ë‚´ìš© |
|----------|--------|----------|
| `test_acc_steps.py` | `integration/test_pipeline.py` | ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ í†µí•© |
| `test_integration.py` | `integration/test_pipeline.py` | CSV íŒŒì´í”„ë¼ì¸ |
| `test_concentric.py` | `integration/test_algorithm.py` | ë™ì‹¬ì› ê²€ì¦ |
| `test_linkage_abc.py` | `unit/test_acc_core_new.py` | Linkage ê³„ì‚° |
| `test_abc_example.py` | `integration/test_pipeline.py` | 3-ì˜ì—­ ì˜ˆì œ |
| `test_nested_structure.py` | `integration/test_algorithm.py` | ì¤‘ì²© êµ¬ì¡° |
| `verify_concentric_full.py` | `integration/test_algorithm.py` | 6-ì˜ì—­ ê²€ì¦ |
| `test_area_editor.py` | `gui/test_dialogs.py` | Area editor |
| `test_empty_area_list.py` | `gui/test_matrix_widget.py` | ë¹ˆ ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬ |
| `test_step_dendro.py` | `gui/test_dendrogram_widget.py` | Dendrogram ì‹œê°í™” |
| `test_dialog.py` | `gui/test_dialogs.py` | ë‹¤ì´ì–¼ë¡œê·¸ ê¸°ë³¸ |
| `test_gui_simple.py` | `gui/test_main_window.py` | ë©”ì¸ ìœˆë„ìš° |
| `test_merge_radii.py` | `unit/test_acc_core_new.py` | Radii merge |
| `test_pyqt5.py` | ì‚­ì œ | í™˜ê²½ í…ŒìŠ¤íŠ¸ ë¶ˆí•„ìš” |
| `test_matplotlib_qt5.py` | ì‚­ì œ | í™˜ê²½ í…ŒìŠ¤íŠ¸ ë¶ˆí•„ìš” |
| `test_canvas_import.py` | ì‚­ì œ | í™˜ê²½ í…ŒìŠ¤íŠ¸ ë¶ˆí•„ìš” |
| `test_clustering_steps.py` | `gui/test_dendrogram_widget.py` | Clustering manager |
| `test_acc_with_log.py` | ì‚­ì œ | ë¡œê¹…ì€ ì‹¤í–‰ ì¤‘ í™•ì¸ |

---

## pytest ì„¤ì •

### conftest.py

```python
import pytest
import pandas as pd
from pathlib import Path

@pytest.fixture
def test_data_dir():
    """í…ŒìŠ¤íŠ¸ ë°ì´í„° ë””ë ‰í† ë¦¬"""
    return Path(__file__).parent / "test_data"

@pytest.fixture
def sample_sub_matrix(test_data_dir):
    """ìƒ˜í”Œ subordinate matrix (6-ì˜ì—­)"""
    df = pd.read_csv(test_data_dir / "sample_subordinate.csv", index_col=0)
    return {idx: dict(row) for idx, row in df.iterrows()}

@pytest.fixture
def sample_inc_matrix(test_data_dir):
    """ìƒ˜í”Œ inclusive matrix (6-ì˜ì—­)"""
    df = pd.read_csv(test_data_dir / "sample_inclusive.csv", index_col=0)
    return {idx: dict(row) for idx, row in df.iterrows()}

@pytest.fixture
def simple_abc_matrix():
    """ê°„ë‹¨í•œ 3-ì˜ì—­ í…ŒìŠ¤íŠ¸ìš©"""
    return {
        "A": {"B": 0.9, "C": 0.5},
        "B": {"A": 0.9, "C": 0.5},
        "C": {"A": 0.5, "B": 0.5}
    }

@pytest.fixture
def invalid_asymmetric_matrix():
    """ë¹„ëŒ€ì¹­ matrix (í…ŒìŠ¤íŠ¸ìš©)"""
    return {
        "A": {"B": 0.9},
        "B": {"A": 0.8}  # ë¹„ëŒ€ì¹­
    }

@pytest.fixture
def qapp(qapp):
    """PyQt5 QApplication (pytest-qt ì œê³µ)"""
    return qapp
```

### pytest.ini

```ini
[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts =
    -v
    --strict-markers
    --tb=short
    --cov=.
    --cov-report=html
    --cov-report=term-missing
markers =
    unit: Unit tests
    integration: Integration tests
    gui: GUI tests
    slow: Slow running tests
    performance: Performance benchmarks
```

### requirements-dev.txt

```
pytest>=7.4.0
pytest-qt>=4.2.0
pytest-cov>=4.1.0
pytest-mock>=3.11.0
pytest-benchmark>=4.0.0
```

---

## GitHub Actions Workflow

**.github/workflows/test.yml**:

```yaml
name: Tests

on:
  push:
    branches: [ main, dev ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        python-version: ['3.8', '3.9', '3.10', '3.11']

    steps:
    - uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: ${{ matrix.python-version }}

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install -r requirements-dev.txt

    - name: Run unit tests
      run: pytest tests/unit -v --cov=. --cov-report=xml

    - name: Run integration tests
      run: pytest tests/integration -v

    - name: Run GUI tests
      run: pytest tests/gui -v
      env:
        QT_QPA_PLATFORM: offscreen

    - name: Upload coverage
      uses: codecov/codecov-action@v3
      with:
        file: ./coverage.xml
```

---

## ì‘ì—… ë‹¨ê³„

### Phase 1: ì¤€ë¹„ (15ë¶„)
1. âœ… `tests/` ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
2. âœ… `conftest.py` ì‘ì„±
3. âœ… `pytest.ini` ì‘ì„±
4. âœ… í…ŒìŠ¤íŠ¸ ë°ì´í„° ë³µì‚¬

### Phase 2: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (1ì‹œê°„)
1. âœ… `test_acc_core.py` - í•µì‹¬ í•¨ìˆ˜ë“¤
2. âœ… `test_acc_core_new.py` - ìƒˆ ì•Œê³ ë¦¬ì¦˜
3. âœ… `test_acc_utils.py` - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
4. âœ… `test_data_structures.py` - ë°ì´í„° êµ¬ì¡°

### Phase 3: í†µí•© í…ŒìŠ¤íŠ¸ (45ë¶„)
1. âœ… `test_pipeline.py` - ì „ì²´ íŒŒì´í”„ë¼ì¸
2. âœ… `test_algorithm.py` - ì•Œê³ ë¦¬ì¦˜ ê²€ì¦
3. âœ… `test_validation.py` - ë°ì´í„° ê²€ì¦

### Phase 4: GUI í…ŒìŠ¤íŠ¸ (45ë¶„)
1. âœ… `test_main_window.py`
2. âœ… `test_matrix_widget.py`
3. âœ… `test_dendrogram_widget.py`
4. âœ… `test_acc_widget.py`
5. âœ… `test_dialogs.py`

### Phase 5: CI/CD ë° ë§ˆë¬´ë¦¬ (30ë¶„)
1. âœ… GitHub Actions workflow ì‘ì„±
2. âœ… READMEì— í…ŒìŠ¤íŠ¸ ë°°ì§€ ì¶”ê°€
3. âœ… ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²€ì¦
4. âœ… ì»¤ë²„ë¦¬ì§€ í™•ì¸ (ëª©í‘œ: 80%+)
5. âœ… ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì •ë¦¬

---

## ì˜ˆìƒ ê²°ê³¼

### í†µê³„
- **í…ŒìŠ¤íŠ¸ íŒŒì¼**: ì•½ 15ê°œ
- **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**: 100+ ê°œ
- **ì½”ë“œ ì»¤ë²„ë¦¬ì§€**: 80%+ ëª©í‘œ
- **ì‹¤í–‰ ì‹œê°„**: < 30ì´ˆ (GUI ì œì™¸)

### í’ˆì§ˆ ì§€í‘œ
- âœ… ëª¨ë“  í•µì‹¬ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
- âœ… Edge case ì²˜ë¦¬ ê²€ì¦
- âœ… ì˜¤ë¥˜ ì²˜ë¦¬ ê²€ì¦
- âœ… GUI ê¸°ë³¸ ë™ì‘ ê²€ì¦
- âœ… CI/CD ìë™í™”

### ìœ ì§€ë³´ìˆ˜ì„±
- âœ… ì¼ê´€ëœ êµ¬ì¡°
- âœ… ëª…í™•í•œ ë„¤ì´ë°
- âœ… Fixture ì¬ì‚¬ìš©
- âœ… ë¬¸ì„œí™”ëœ í…ŒìŠ¤íŠ¸
- âœ… ì‰¬ìš´ ì¶”ê°€/ìˆ˜ì •

---

## ì°¸ê³ ì‚¬í•­

### í…ŒìŠ¤íŠ¸ ì‘ì„± ì›ì¹™

1. **AAA íŒ¨í„´**: Arrange, Act, Assert
2. **ë…ë¦½ì„±**: ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì 
3. **ëª…í™•ì„±**: í…ŒìŠ¤íŠ¸ ì´ë¦„ìœ¼ë¡œ ì˜ë„ íŒŒì•…
4. **ë°˜ë³µì„±**: ë™ì¼ ê²°ê³¼ ë³´ì¥
5. **ë¹ ë¥¸ ì‹¤í–‰**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” ë¹ ë¥´ê²Œ

### í…ŒìŠ¤íŠ¸ ë„¤ì´ë°

```python
def test_<function>_<scenario>_<expected>():
    """
    í…ŒìŠ¤íŠ¸ ëŒ€ìƒ í•¨ìˆ˜ì˜ ì‹œë‚˜ë¦¬ì˜¤ì™€ ì˜ˆìƒ ê²°ê³¼ë¥¼ ëª…í™•íˆ
    """
    pass

# ì˜ˆì‹œ
def test_validate_similarity_matrix_asymmetric_returns_false():
    """ë¹„ëŒ€ì¹­ matrixëŠ” ê²€ì¦ ì‹¤íŒ¨ë¥¼ ë°˜í™˜í•œë‹¤"""
    pass

def test_build_acc_iterative_6_areas_creates_correct_steps():
    """6-ì˜ì—­ ë°ì´í„°ë¡œ ACC ë¹Œë“œ ì‹œ ì˜¬ë°”ë¥¸ ë‹¨ê³„ ìƒì„±"""
    pass
```

### GUI í…ŒìŠ¤íŠ¸ ì£¼ì˜ì‚¬í•­

- `pytest-qt` ì‚¬ìš©
- QApplication fixture í•„ìš”
- CIì—ì„œëŠ” `QT_QPA_PLATFORM=offscreen`
- ì‹œê°ì  ê²€ì¦ì€ ìˆ˜ë™

---

## ë‹¤ìŒ ë‹¨ê³„

1. Phase 1ë¶€í„° ìˆœì°¨ ì§„í–‰
2. ê° Phase ì™„ë£Œ í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í™•ì¸
3. ì»¤ë²„ë¦¬ì§€ ì¸¡ì • ë° ê°œì„ 
4. GitHub Actions í†µí•©
5. ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

## ì˜ˆìƒ ì‹œê°„

- **ê³„íš ë° ë¬¸ì„œí™”**: 30ë¶„ âœ…
- **Phase 1 (ì¤€ë¹„)**: 15ë¶„
- **Phase 2 (ë‹¨ìœ„)**: 1ì‹œê°„
- **Phase 3 (í†µí•©)**: 45ë¶„
- **Phase 4 (GUI)**: 45ë¶„
- **Phase 5 (CI/CD)**: 30ë¶„
- **ì´**: ì•½ 3.5ì‹œê°„

---

## ì„±ê³µ ê¸°ì¤€

- [x] ëª¨ë“  ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ ë³´ì¡´
- [x] pytest ì‹¤í–‰ ì„±ê³µ
- [~] ì»¤ë²„ë¦¬ì§€ 22% (ëª©í‘œ 80%, í•µì‹¬ ëª¨ë“ˆ 70%+)
- [x] CI/CD êµ¬ì„± ì™„ë£Œ
- [x] ë¬¸ì„œí™” ì™„ë£Œ

---

## ì™„ë£Œ í˜„í™© (2025-11-15)

### êµ¬í˜„ ì™„ë£Œ í•­ëª©

#### Phase 1: ì¤€ë¹„ ë° ì¸í”„ë¼ êµ¬ì¶• âœ…
- tests/ ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„± (unit, integration, gui, performance)
- pytest ì„¤ì • íŒŒì¼ ì‘ì„± (pytest.ini)
- ê°œë°œ ì˜ì¡´ì„± íŒŒì¼ ì‘ì„± (requirements-dev.txt)
- Fixture íŒŒì¼ ì‘ì„± (conftest.py, 10ê°œ fixtures)
- í…ŒìŠ¤íŠ¸ ë°ì´í„° ë³µì‚¬ (tests/test_data/)

#### Phase 2: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± âœ…
- **test_acc_utils.py** (15 tests, 100% coverage)
  - TestSimilarityToDistance (3 tests)
  - TestValidateSimilarityMatrix (5 tests)
  - TestDictMatrixFromDataframe (2 tests)
  - TestMatrixToDendrogram (3 tests)
  - TestLinkageToDendronode (2 tests)

- **test_acc_core.py** (17 tests, acc_core.py 70% coverage)
  - TestDendroNode (3 tests)
  - TestFindClusterInDendro (3 tests)
  - TestAveragePairwiseSimilarity (4 tests)
  - TestExtractClustersFromDendro (3 tests)
  - TestDecorateClusters (4 tests)

- **test_acc_core_new.py** (26 tests, acc_core_new.py 42% coverage)
  - TestCoordinateConversion (5 tests)
  - TestFindHighestSimilarityPair (4 tests)
  - TestGetSimilarity (3 tests)
  - TestAveragePairwiseSimilarity (4 tests)
  - TestFormatClusterStructure (4 tests)
  - TestPlaceFirstTwoAreas (6 tests)

#### Phase 3: í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± âœ…
- **test_pipeline.py** (13 tests, 98% coverage)
  - TestFullPipeline (4 tests)
  - TestDifferentMethods (2 tests with parametrize)
  - TestEdgeCases (4 tests)
  - TestResultStructure (2 tests)

#### Phase 5: CI/CD ë° ë§ˆë¬´ë¦¬ âœ…
- GitHub Actions workflow ì‘ì„± (.github/workflows/test.yml)
- READMEì— í…ŒìŠ¤íŠ¸ ë°°ì§€ ì¶”ê°€ (Tests, Codecov)
- Python 3.9-3.12 ë©€í‹°ë²„ì „ í…ŒìŠ¤íŠ¸ ì§€ì›
- Codecov í†µí•©

### í…ŒìŠ¤íŠ¸ í†µê³„

```
í…ŒìŠ¤íŠ¸ íŒŒì¼: 4ê°œ (unit: 3, integration: 1)
í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤: 71ê°œ (ëª¨ë‘ í†µê³¼)
ì‹¤í–‰ ì‹œê°„: ~5.8ì´ˆ
ì „ì²´ ì»¤ë²„ë¦¬ì§€: 22%

í•µì‹¬ ëª¨ë“ˆ ì»¤ë²„ë¦¬ì§€:
- acc_core.py: 70%
- acc_utils.py: 72%
- acc_core_new.py: 42%
- test_pipeline.py: 98%
```

### ìƒì„±ëœ íŒŒì¼ ëª©ë¡

```
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py                  # 10ê°œ fixtures
â”œâ”€â”€ pytest.ini                   # pytest ì„¤ì •
â”œâ”€â”€ requirements-dev.txt         # ê°œë°œ ì˜ì¡´ì„±
â”œâ”€â”€ test_data/
â”‚   â”œâ”€â”€ sample_subordinate.csv
â”‚   â””â”€â”€ sample_inclusive.csv
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_acc_core.py        # 17 tests
â”‚   â”œâ”€â”€ test_acc_core_new.py    # 26 tests
â”‚   â””â”€â”€ test_acc_utils.py       # 15 tests
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_pipeline.py        # 13 tests
â”œâ”€â”€ gui/
â”‚   â””â”€â”€ __init__.py
â””â”€â”€ performance/
    â””â”€â”€ __init__.py

.github/workflows/
â””â”€â”€ test.yml                     # GitHub Actions CI
```

### ì»¤ë°‹ ì´ë ¥

1. `9cad9da` - Add test and verification scripts
2. `[ìƒˆë¡œ ìƒì„±]` - Add pytest-based test suite and reorganize tests (P28)
3. `[ìƒˆë¡œ ìƒì„±]` - Add comprehensive unit tests for acc_core and acc_core_new (P28)

### ë¯¸ì™„ë£Œ í•­ëª©

#### Phase 4: GUI í…ŒìŠ¤íŠ¸ (ë³´ë¥˜)
- GUI í…ŒìŠ¤íŠ¸ëŠ” PyQt6 ì˜ì¡´ì„± ë° í™˜ê²½ ì„¤ì • ë³µì¡ì„±ìœ¼ë¡œ ì¸í•´ ë³´ë¥˜
- í–¥í›„ í•„ìš” ì‹œ pytest-qtë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ê°€ ì˜ˆì •

#### ì»¤ë²„ë¦¬ì§€ ê°œì„  ì˜ì—­
- acc_core.pyì˜ ë³‘í•© í•¨ìˆ˜ (add_area_to_cluster, merge_two_clusters)
- acc_core_new.pyì˜ iterative algorithm í•¨ìˆ˜
- acc_core_acc2.py (0% - ì‚¬ìš© ì—¬ë¶€ í™•ì¸ í•„ìš”)
- GUI ì½”ë“œ (acc_gui.py, 0%)

### í–¥í›„ ê°œì„  ë°©í–¥

1. **ì»¤ë²„ë¦¬ì§€ í–¥ìƒ**
   - ë³‘í•© ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸ ì¶”ê°€ë¡œ acc_core.py ì»¤ë²„ë¦¬ì§€ë¥¼ 80%+ë¡œ
   - acc_core_new.pyì˜ iterative functions í…ŒìŠ¤íŠ¸ ì¶”ê°€

2. **GUI í…ŒìŠ¤íŠ¸**
   - pytest-qt ì„¤ì • ì™„ë£Œ í›„ ê¸°ë³¸ GUI ë™ì‘ í…ŒìŠ¤íŠ¸ ì¶”ê°€
   - Snapshot í…ŒìŠ¤íŠ¸ë¡œ ì‹œê°í™” ì¶œë ¥ ê²€ì¦

3. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**
   - tests/performance/ ë””ë ‰í† ë¦¬ì— ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸ ì¶”ê°€
   - ëŒ€ê·œëª¨ ë°ì´í„°ì…‹ ì²˜ë¦¬ ì„±ëŠ¥ ì¸¡ì •

4. **ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì •ë¦¬**
   - ë£¨íŠ¸ì˜ 17ê°œ í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ tests/legacy/ ë˜ëŠ” examples/ë¡œ ì´ë™
   - ìœ ìš©í•œ í…ŒìŠ¤íŠ¸ëŠ” ìƒˆ êµ¬ì¡°ë¡œ í†µí•©

### ê²°ë¡ 

âœ… **í•µì‹¬ ëª©í‘œ ë‹¬ì„±**: pytest ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ êµ¬ì¶• ì™„ë£Œ
âœ… **í’ˆì§ˆ í™•ë³´**: 71ê°œ í…ŒìŠ¤íŠ¸ë¡œ í•µì‹¬ ì•Œê³ ë¦¬ì¦˜ 70%+ ì»¤ë²„ë¦¬ì§€
âœ… **ìë™í™”**: GitHub Actions CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ì™„ë£Œ
ğŸ“Š **ê°œì„  ì—¬ì§€**: ì „ì²´ ì»¤ë²„ë¦¬ì§€ 22% â†’ í–¥í›„ ë³‘í•©/GUI í…ŒìŠ¤íŠ¸ ì¶”ê°€ í•„ìš”

í…ŒìŠ¤íŠ¸ ì²´ê³„í™” ì‘ì—…ì„ í†µí•´ ACC í”„ë¡œì íŠ¸ì˜ ì½”ë“œ í’ˆì§ˆê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
