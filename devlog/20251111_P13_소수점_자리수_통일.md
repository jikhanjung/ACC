# 20251111 P13: ì†Œìˆ˜ì  ìë¦¬ìˆ˜ í†µì¼ (Matrixì™€ Dendrogram)

## ê°œìš”

Matrixì™€ Dendrogramì— í‘œì‹œë˜ëŠ” similarity ê°’ì˜ ì†Œìˆ˜ì  ìë¦¬ìˆ˜ë¥¼ í†µì¼.

## ë¬¸ì œ

### Before (ë¶ˆì¼ì¹˜)

**Matrix:**
```
       J    T    Y
J      -   0.900  0.800  â† .3f (ì†Œìˆ˜ì  3ìë¦¬)
T          -      0.800
```

**Dendrogram (Xì¶•):**
```
1.00  0.90  0.80  ...  â† .2f (ì†Œìˆ˜ì  2ìë¦¬)
```

**Dendrogram (ë…¸ë“œ ê°’):**
```
Jâ”€â”€â”€T [0.90]  â† .2f (ì†Œìˆ˜ì  2ìë¦¬)
```

**ë¬¸ì œì :**
- âŒ Matrix: 3ìë¦¬
- âŒ Dendrogram: 2ìë¦¬
- âŒ ì¼ê´€ì„± ì—†ìŒ
- âŒ í˜¼ë€ìŠ¤ëŸ¬ì›€

## í•´ê²°

### After (í†µì¼)

**Matrix:**
```
       J    T    Y
J      -   0.900  0.800  â† .3f
T          -      0.800
```

**Dendrogram (Xì¶•):**
```
1.000  0.900  0.800  ...  â† .3fë¡œ ë³€ê²½ âœ“
```

**Dendrogram (ë…¸ë“œ ê°’):**
```
Jâ”€â”€â”€T [0.900]  â† .3fë¡œ ë³€ê²½ âœ“
```

**ê°œì„ ì :**
- âœ… ëª¨ë‘ ì†Œìˆ˜ì  3ìë¦¬ë¡œ í†µì¼
- âœ… ì¼ê´€ì„± ìœ ì§€
- âœ… ëª…í™•í•œ ë¹„êµ ê°€ëŠ¥

## ì½”ë“œ ë³€ê²½

### 1. Matrix (ê¸°ì¡´, ë³€ê²½ ì—†ìŒ)

**acc_gui.py - StepMatrixWidget.populate_table()**

```python
# Line 342
item = QTableWidgetItem(f"{value:.3f}")  # ì†Œìˆ˜ì  3ìë¦¬
```

### 2. Dendrogram Xì¶• ëˆˆê¸ˆ

**acc_gui.py - StepDendrogramWidget.update_dendrogram()**

**Before:**
```python
# Line 506
similarity_labels = [f'{max_sim - x:.2f}' if 0 <= x <= max_sim else ''
                     for x in xticks]
```

**After:**
```python
# Line 506
similarity_labels = [f'{max_sim - x:.3f}' if 0 <= x <= max_sim else ''
                     for x in xticks]  # .2f â†’ .3f
```

### 3. Dendrogram ë…¸ë“œ ê°’

**acc_gui.py - StepDendrogramWidget.update_dendrogram()**

**Before:**
```python
# Line 523
ax.text(merge_distance, merge_y, f' {merge_similarity:.2f}', ...)
```

**After:**
```python
# Line 523
ax.text(merge_distance, merge_y, f' {merge_similarity:.3f}', ...)  # .2f â†’ .3f
```

## ë³€ê²½ ìœ„ì¹˜ ìš”ì•½

| ìœ„ì¹˜ | Before | After | ë³€ê²½ |
|------|--------|-------|------|
| Matrix ê°’ | `.3f` | `.3f` | ë³€ê²½ ì—†ìŒ |
| Dendrogram Xì¶• | `.2f` | `.3f` | âœ… ë³€ê²½ |
| Dendrogram ë…¸ë“œ | `.2f` | `.3f` | âœ… ë³€ê²½ |

## íš¨ê³¼

### 1. ì¼ê´€ì„±

**Matrixì—ì„œ:**
```
J-T similarity: 0.900
```

**Dendrogram Xì¶•ì—ì„œ:**
```
1.000  0.900  0.800  ...  â† 0.900 í‘œì‹œ
```

**Dendrogram ë…¸ë“œì—ì„œ:**
```
Jâ”€â”€â”€T [0.900]  â† 0.900 í‘œì‹œ
```

ëª¨ë‘ **0.900**ìœ¼ë¡œ ë™ì¼í•˜ê²Œ í‘œì‹œ! âœ“

### 2. ì •í™•ì„±

**ì†Œìˆ˜ì  3ìë¦¬:**
- 0.001 ì°¨ì´ê¹Œì§€ êµ¬ë¶„ ê°€ëŠ¥
- ìœ ì‚¬ë„ ë¹„êµì— ì¶©ë¶„í•œ ì •ë°€ë„
- ë„ˆë¬´ ê¸¸ì§€ë„ ì•Šê³  ì ì ˆí•¨

### 3. ê°€ë…ì„±

**í†µì¼ëœ ìë¦¬ìˆ˜:**
```
0.900
0.850
0.800
0.750
```

ìë¦¬ìˆ˜ê°€ ê°™ì•„ì„œ í•œëˆˆì— ë¹„êµí•˜ê¸° ì‰¬ì›€ âœ“

## ì‚¬ìš©ì ê²½í—˜

### Before (í˜¼ë€)

```
ì‚¬ìš©ì: "Matrixì—ì„œ J-Tê°€ 0.900ì¸ë°..."
       "Dendrogramì—ì„œëŠ” 0.90ì´ë„¤?"
       "0.900ê³¼ 0.90ì´ ê°™ì€ ê°’ì¸ê°€? ğŸ¤”"
```

### After (ëª…í™•)

```
ì‚¬ìš©ì: "Matrixì—ì„œ J-Tê°€ 0.900"
       "Dendrogramì—ì„œë„ 0.900"
       "ì™„ì „íˆ ì¼ì¹˜! ğŸ‘"
```

## ì •ë°€ë„ ê³ ë ¤ì‚¬í•­

### ì™œ 3ìë¦¬?

**ë„ˆë¬´ ì ìŒ (1ìë¦¬):**
```
0.9, 0.8, 0.8  â† Y-Tì™€ Y-Jê°€ 0.8ë¡œ ê°™ì•„ ë³´ì„ (ì‹¤ì œë¡œëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆìŒ)
```

**ì ì ˆí•¨ (3ìë¦¬):**
```
0.900, 0.850, 0.800  â† ëª…í™•íˆ êµ¬ë¶„ë¨ âœ“
```

**ë„ˆë¬´ ë§ìŒ (5ìë¦¬):**
```
0.90000, 0.85000, 0.80000  â† ë¶ˆí•„ìš”í•˜ê²Œ ê¸¸ê³  ë³µì¡í•¨
```

### Similarity ë²”ìœ„

ì¼ë°˜ì ìœ¼ë¡œ similarityëŠ” 0.0~1.0 ë²”ìœ„:
- ì†Œìˆ˜ì  3ìë¦¬ = 1000ë‹¨ê³„ êµ¬ë¶„
- ì¶©ë¶„íˆ ì„¸ë°€í•¨ âœ“

## í…ŒìŠ¤íŠ¸

```bash
$ python acc_gui.py
# Load sample_subordinate.csv
```

**í™•ì¸ í•­ëª©:**

1. **Matrix:**
   ```
   J-T: 0.900  â† ì†Œìˆ˜ì  3ìë¦¬ âœ“
   ```

2. **Dendrogram Xì¶•:**
   ```
   1.000  0.900  0.800  ...  â† ì†Œìˆ˜ì  3ìë¦¬ âœ“
   ```

3. **Dendrogram ë…¸ë“œ (ì²´í¬ë°•ìŠ¤ ON):**
   ```
   Jâ”€â”€â”€T [0.900]  â† ì†Œìˆ˜ì  3ìë¦¬ âœ“
   ```

4. **ì¼ê´€ì„±:**
   ```
   Matrix: 0.900
   Dendrogram Xì¶•: 0.900
   Dendrogram ë…¸ë“œ: 0.900
   ëª¨ë‘ ì¼ì¹˜! âœ“
   ```

## ë¹„êµ ì˜ˆì‹œ

### Sample Data

#### Step 1: J + T ë³‘í•©

**Matrix:**
```
       J+T   Y     N     O     Q
J+T     -   0.800 0.390 0.340 0.350
```

**Dendrogram:**
```
Xì¶•: 1.000  0.900  0.800  ...
ë…¸ë“œ: Jâ”€â”€â”€T [0.900]
```

**í™•ì¸:**
- Matrixì—ì„œ J+T-Y: 0.800
- Dendrogram Xì¶•: 0.800
- Dendrogramì—ì„œ J-T ë³‘í•©: 0.900
- ëª¨ë‘ ì†Œìˆ˜ì  3ìë¦¬ë¡œ ì¼ê´€ì„± ìœ ì§€ âœ“

## ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### ë‹¤ë¥¸ ìë¦¬ìˆ˜ë¡œ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´?

ëª¨ë“  `.3f`ë¥¼ ì¼ê´„ ë³€ê²½:

```python
# ì†Œìˆ˜ì  2ìë¦¬ë¡œ ë³€ê²½í•˜ë ¤ë©´:
f"{value:.2f}"        # Matrix
f'{max_sim - x:.2f}'  # Dendrogram Xì¶•
f' {merge_similarity:.2f}'  # Dendrogram ë…¸ë“œ

# ì†Œìˆ˜ì  4ìë¦¬ë¡œ ë³€ê²½í•˜ë ¤ë©´:
f"{value:.4f}"        # Matrix
f'{max_sim - x:.4f}'  # Dendrogram Xì¶•
f' {merge_similarity:.4f}'  # Dendrogram ë…¸ë“œ
```

### ê³¼í•™ì  í‘œê¸°ë²•?

ë§Œì•½ ë§¤ìš° ì‘ì€ ê°’ì´ ìˆë‹¤ë©´:

```python
f"{value:.3e}"  # ì˜ˆ: 1.234e-05
```

í•˜ì§€ë§Œ similarityëŠ” ë³´í†µ 0.0~1.0ì´ë¯€ë¡œ ë¶ˆí•„ìš”.

## ê²°ë¡ 

ì†Œìˆ˜ì  ìë¦¬ìˆ˜ë¥¼ 3ìë¦¬ë¡œ í†µì¼:
- âœ… Matrix: `.3f`
- âœ… Dendrogram Xì¶•: `.2f` â†’ `.3f`
- âœ… Dendrogram ë…¸ë“œ: `.2f` â†’ `.3f`

íš¨ê³¼:
- âœ… ì¼ê´€ì„± ìœ ì§€
- âœ… ë¹„êµ ìš©ì´
- âœ… ì‚¬ìš©ì í˜¼ë€ ê°ì†Œ
- âœ… ì „ë¬¸ì ì¸ ì™¸ê´€

**ëª¨ë“  similarity ê°’ì´ ë™ì¼í•œ í˜•ì‹ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤!**
