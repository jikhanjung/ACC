# 38: 유사도 계산 연동 및 Global 탭 구현 결과

**작성일**: 2026-02-11
**관련 계획**: P35
**커밋**: b4b9eb5

---

## 구현 내용

DataPanel의 presence/absence 데이터로부터 Jaccard 유사도를 계산하여 LeftPanel에 자동 전달하는 파이프라인 완성.

### 핵심 기능

1. **Calculate Similarity 버튼**: DataPanel 하단에 추가
   - 현재 탭 → Local similarity matrix
   - 전체 탭 union → Global similarity matrix
   - 계산 결과를 LeftPanel의 StepMatrixWidget에 전달
   - 이어서 dendrogram 자동 갱신

2. **Global (Union) 탭**: 모든 시트의 union을 보여주는 읽기 전용 탭
   - 자동 생성, 항상 마지막 위치
   - 편집 불가 (NoEditTriggers, NoContextMenu)
   - 시트 변경 시 자동 갱신

3. **acc_utils 확장**:
   - `jaccard_similarity_from_presence()` — presence matrix에서 Jaccard 유사도 계산
   - `union_presence_matrix()` — 여러 시트를 taxa union으로 합성

### 데이터 흐름

```
DataPanel                    LeftPanel              CenterPanel
[Sheet1] ──(현재탭)──→ Local Similarity ──→ Local Dendrogram
[Sheet2]                    Matrix
[Sheet3]
  ↓ union
[Global] ──(전체)───→ Global Similarity ──→ Global Dendrogram
                          Matrix
```

### 수정된 파일

- `acc_gui.py` — DataPanel.calculate_similarity(), _update_global_tab() 추가
- `acc_utils.py` — jaccard_similarity_from_presence(), union_presence_matrix() 추가
