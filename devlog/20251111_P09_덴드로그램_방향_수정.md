# 20251111 P09: ë´ë“œë¡œê·¸ë¨ ë°©í–¥ ìˆ˜ì • (ìˆ˜ì •ë¨)

## ê°œìš”

Dendrogram Xì¶•ì„ Similarityë¡œ ë³€ê²½í•œ í›„, ë°©í–¥ ìˆ˜ì •.

**âš ï¸ ì´ˆê¸° êµ¬í˜„ ì˜¤ë¥˜**: Xì¶• ë°˜ì „ìœ¼ë¡œ í•´ê²°í•˜ë ¤ í–ˆìœ¼ë‚˜, linkage ê°’ ë³€í™˜ + Xì¶• ë°˜ì „ = ì´ì¤‘ ë°˜ì „ìœ¼ë¡œ ì›ìœ„ì¹˜.
**âœ… ìµœì¢… í•´ê²°**: Xì¶• ë°˜ì „ ì œê±°. Linkage ê°’ì„ similarityë¡œ ë³€í™˜í•˜ë©´ ìë™ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ë°©í–¥.

## ë¬¸ì œ (Before)

```
Dendrogram (ì˜ëª»ëœ ë°©í–¥):
Similarity
0.3  0.4  0.5  0.6  0.7  0.8  0.9  1.0
â”‚                                    â”‚
Root (ë‚®ì€ ìœ ì‚¬ë„)                  Leaf (ë†’ì€ ìœ ì‚¬ë„)
ì™¼ìª½                                ì˜¤ë¥¸ìª½
```

**ë¬¸ì œì :**
- âŒ Xì¶•: 0.0ë¶€í„° ì¦ê°€
- âŒ Leaf (similarity=1.0)ê°€ ì˜¤ë¥¸ìª½ ë
- âŒ Root (ë‚®ì€ similarity)ê°€ ì™¼ìª½
- âŒ **BUT**: Treeê°€ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ê·¸ë ¤ì ¸ ìˆìŒ
- âŒ Leafê°€ ì™¼ìª½ì—, Rootê°€ ì˜¤ë¥¸ìª½ì— í‘œì‹œë¨

### ì™œ ë¬¸ì œì¸ê°€?

Distance ê¸°ì¤€ dendrogram:
```
Distance
0.0                              Max
â”‚                                 â”‚
Leaf (distance=0, ìê¸° ìì‹ )     Root (ìµœëŒ€ distance)
```
- LeafëŠ” distance=0 (ì™¼ìª½)ì—ì„œ ì‹œì‘
- ë³‘í•©ì´ ì§„í–‰ë˜ë©´ì„œ distance ì¦ê°€ (ì˜¤ë¥¸ìª½ìœ¼ë¡œ)

Similarity ê¸°ì¤€ dendrogram (ë…¼ë¦¬ì ìœ¼ë¡œ):
```
Similarity
0.0                              1.0
â”‚                                 â”‚
Root (ë‚®ì€ similarity)           Leaf (similarity=1.0, ìê¸° ìì‹ )
```
- LeafëŠ” similarity=1.0 (ì˜¤ë¥¸ìª½)ì—ì„œ ì‹œì‘
- ë³‘í•©ì´ ì§„í–‰ë˜ë©´ì„œ similarity ê°ì†Œ (ì™¼ìª½ìœ¼ë¡œ)
- **Xì¶• ë°©í–¥ì„ ë°˜ì „í•´ì•¼ í•¨!**

## í•´ê²° (After)

```
Dendrogram (ì˜¬ë°”ë¥¸ ë°©í–¥):
Similarity
1.0  0.9  0.8  0.7  0.6  0.5  0.4  0.3
â”‚                                    â”‚
Leaf (ë†’ì€ ìœ ì‚¬ë„)                  Root (ë‚®ì€ ìœ ì‚¬ë„)
ì˜¤ë¥¸ìª½                              ì™¼ìª½
```

**ê°œì„ ì :**
- âœ… Xì¶•: 1.0ë¶€í„° ê°ì†Œ (ë°˜ì „)
- âœ… Leaf (similarity=1.0)ê°€ ì˜¤ë¥¸ìª½ ë
- âœ… Root (ë‚®ì€ similarity)ê°€ ì™¼ìª½
- âœ… Tree ë°©í–¥ê³¼ Xì¶• ì˜ë¯¸ê°€ ì¼ì¹˜

## êµ¬í˜„

### âš ï¸ ì˜ëª»ëœ ì ‘ê·¼ (ì´ˆê¸°)

```python
# 1. Linkage ê°’ì„ similarityë¡œ ë³€í™˜
full_linkage[:, 2] = max_sim - full_linkage[:, 2]
# distance 0.1 â†’ similarity 0.9

# 2. Dendrogram ê·¸ë¦¬ê¸°
dendrogram(full_linkage, ...)
# similarity 0.9 â†’ X=0.9 ìœ„ì¹˜ì— ê·¸ë ¤ì§ (ì˜¤ë¥¸ìª½)

# 3. Xì¶• ë°˜ì „ âŒ
ax.invert_xaxis()
# X=0.9ê°€ ë‹¤ì‹œ ì™¼ìª½ìœ¼ë¡œ... ì›ìœ„ì¹˜!
```

**ë¬¸ì œ**: Linkage ê°’ ë³€í™˜ + Xì¶• ë°˜ì „ = **ì´ì¤‘ ë°˜ì „** â†’ ì›ë˜ëŒ€ë¡œ

### âœ… ì˜¬ë°”ë¥¸ êµ¬í˜„ (ìµœì¢…)

**acc_gui.py - StepDendrogramWidget.update_dendrogram()**

```python
def update_dendrogram(self):
    # ...

    # 1. Linkage matrixë¥¼ similarityë¡œ ë³€í™˜
    full_linkage = self.step_manager.linkage_matrix.copy()
    max_sim = self.step_manager.max_sim
    full_linkage[:, 2] = max_sim - full_linkage[:, 2]
    # distance 0.1 â†’ similarity 0.9

    # 2. Dendrogram ê·¸ë¦¬ê¸°
    ddata = dendrogram(
        full_linkage,
        labels=self.step_manager.original_labels,
        ax=ax,
        orientation='right',
        # ...
    )
    # similarity 0.9 â†’ X=0.9 ìœ„ì¹˜ (ì˜¤ë¥¸ìª½, leaf)
    # similarity 0.3 â†’ X=0.3 ìœ„ì¹˜ (ì™¼ìª½, root)

    # 3. ë¹¨ê°„ ì ì„  (í˜„ì¬ step)
    if self.current_step < len(full_linkage):
        current_height = full_linkage[self.current_step - 1, 2]
        ax.axvline(x=current_height, color='red', ...)

    # 4. Xì¶• ë ˆì´ë¸”
    ax.set_xlabel('Similarity', fontsize=9)
    # âœ… Xì¶• ë°˜ì „ ì—†ìŒ! Linkage ê°’ ë³€í™˜ë§Œìœ¼ë¡œ ì¶©ë¶„
```

### ë™ì‘ ì›ë¦¬

#### dendrogram() í•¨ìˆ˜ì˜ ë™ì‘
```python
# dendrogram()ì€ linkage matrixì˜ ê°’ì„ Xì¶• ìœ„ì¹˜ë¡œ ì‚¬ìš©
linkage[i, 2] = 0.1  â†’ X=0.1 ìœ„ì¹˜ì— ê·¸ë¦¼ (ì™¼ìª½)
linkage[i, 2] = 0.9  â†’ X=0.9 ìœ„ì¹˜ì— ê·¸ë¦¼ (ì˜¤ë¥¸ìª½)
```

#### Distance ì‚¬ìš© ì‹œ (ì›ë˜)
```
linkage[:, 2] = distance
distance 0.1 â†’ X=0.1 (ì™¼ìª½, leaf)
distance 0.7 â†’ X=0.7 (ì˜¤ë¥¸ìª½, root)

Xì¶•:
0.0  0.1  ...  0.7  0.8
     Leaf      Root
```

#### Similarityë¡œ ë³€í™˜ í›„ (í˜„ì¬)
```
linkage[:, 2] = max_sim - distance = similarity
distance 0.1 â†’ similarity 0.9 â†’ X=0.9 (ì˜¤ë¥¸ìª½, leaf) âœ“
distance 0.7 â†’ similarity 0.3 â†’ X=0.3 (ì™¼ìª½, root) âœ“

Xì¶•:
0.0  0.3  ...  0.9  1.0
     Root      Leaf
```

**ìë™ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ë°©í–¥!**

## ì˜ˆì‹œ

### Sample Data (J, T, Y, N, O, Q)

#### Step 0 â†’ Step 1: J + T ë³‘í•©

**Similarity Matrix:**
```
       J    T    Y    N    O    Q
J    1.0  0.9  0.8  0.4  0.35 0.36
T    0.9  1.0  0.8  0.38 0.33 0.34
```

Jì™€ Tì˜ similarity = 0.9

**Dendrogram (ìµœì¢…):**
```
Similarity
0.0  0.3  ...  0.8  0.9  1.0
                    â”‚    â”‚
                    Jâ”€â”€â”€â”€T  â† X=0.9 ìœ„ì¹˜ (ì˜¤ë¥¸ìª½, leaf)
```
- J-T similarity = 0.9
- X=0.9 ìœ„ì¹˜ì— ê·¸ë ¤ì§ (ì˜¤ë¥¸ìª½)
- Leafê°€ ì˜¤ë¥¸ìª½, Rootê°€ ì™¼ìª½ âœ“

#### Step 2: O + Q ë³‘í•©

**Similarity Matrix:**
```
O-Q similarity = 0.85
```

**Dendrogram (After):**
```
Similarity
1.0  0.9  0.85  0.8  0.7  ...  0.3
â”‚    â”‚    â”‚
Jâ”€â”€â”€â”€T    Oâ”€â”€Q                         â† ëª¨ë‘ ì˜¤ë¥¸ìª½ì—ì„œ ì‹œì‘
```
- J-T merge: similarity=0.9 (ë†’ìŒ)
- O-Q merge: similarity=0.85 (ì•½ê°„ ë‚®ìŒ)
- ë‘˜ ë‹¤ ì˜¤ë¥¸ìª½ì—ì„œ ì‹œì‘ â†’ ì˜ë¯¸ ëª…í™•

#### Final Step: ëª¨ë“  í´ëŸ¬ìŠ¤í„° ë³‘í•©

**Dendrogram (After):**
```
Similarity
1.0  0.9  0.85  0.8  0.7  ...  0.35  0.3
â”‚    â”‚    â”‚                      â”‚
Jâ”€â”€â”€â”€T    Oâ”€â”€Q                   â”‚
     â”‚    â”‚                      â”‚
     â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     (J+T+Y)  (N+O+Q)          Final
                                Root
```
- Leaf: ì˜¤ë¥¸ìª½ (similarity=1.0)
- Root: ì™¼ìª½ (ë‚®ì€ similarity)
- ë³‘í•© ì§„í–‰ ë°©í–¥: ì˜¤ë¥¸ìª½ â†’ ì™¼ìª½
- **ë…¼ë¦¬ì ìœ¼ë¡œ ì˜¬ë°”ë¦„!**

## Distance vs Similarity ë¹„êµ

### Distance ê¸°ì¤€ (ì›ë˜ ë°©ì‹)

```
Distance
0.0  0.1  0.15  0.2  0.3  ...  0.65  0.7
â”‚    â”‚    â”‚
Jâ”€â”€â”€â”€T    Oâ”€â”€Q                         â”‚
     â”‚    â”‚                            â”‚
     â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      Root

- Leaf: distance=0 (ì™¼ìª½, ìê¸° ìì‹ ê³¼ ê±°ë¦¬ 0)
- Root: ë†’ì€ distance (ì˜¤ë¥¸ìª½, ë©€ì–´ì§)
- ì¦ê°€ ë°©í–¥: ì™¼ìª½ â†’ ì˜¤ë¥¸ìª½
```

### Similarity ê¸°ì¤€ (í˜„ì¬ ë°©ì‹)

```
Similarity
1.0  0.9  0.85  0.8  0.7  ...  0.35  0.3
â”‚    â”‚    â”‚
Jâ”€â”€â”€â”€T    Oâ”€â”€Q                         â”‚
     â”‚    â”‚                            â”‚
     â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      Root

- Leaf: similarity=1.0 (ì˜¤ë¥¸ìª½, ìê¸° ìì‹ ê³¼ ì™„ì „ ë™ì¼)
- Root: ë‚®ì€ similarity (ì™¼ìª½, ëœ ìœ ì‚¬)
- ê°ì†Œ ë°©í–¥: ì˜¤ë¥¸ìª½ â†’ ì™¼ìª½ (Xì¶• ë°˜ì „)
```

**ê´€ê³„:**
```
distance = max_sim - similarity

distance ì¦ê°€ â†â†’ similarity ê°ì†Œ
distance 0 (ì™¼ìª½) â†â†’ similarity 1.0 (ì˜¤ë¥¸ìª½)
```

## ì‚¬ìš©ì ê²½í—˜

### Before (í˜¼ë€ìŠ¤ëŸ¬ì›€)

```
Matrix:
J-T similarity = 0.9

Dendrogram:
0.3  0.4  0.5  0.6  0.7  0.8  0.9  1.0
                              â”‚    â”‚
                              Jâ”€â”€â”€â”€T

ì‚¬ìš©ì: "J-Tê°€ 0.9ì¸ë° ì™œ ì™¼ìª½ì— ìˆì§€? ğŸ¤”"
```

### After (ì§ê´€ì )

```
Matrix:
J-T similarity = 0.9

Dendrogram:
1.0  0.9  0.8  0.7  0.6  0.5  0.4  0.3
â”‚    â”‚
Jâ”€â”€â”€â”€T

ì‚¬ìš©ì: "J-Tê°€ 0.9ì´ê³  ì˜¤ë¥¸ìª½ ëì— ìˆë„¤! ğŸ‘"
```

## ë¹¨ê°„ ì ì„  (Current Step)

### Before
```
Similarity
0.3  0.4  0.5  0.6  0.7  0.8  0.9  1.0
                              â”‚
                           Step 1 (0.9)
```
Step 1ì˜ ë¹¨ê°„ ì ì„ ì´ ì˜¤ë¥¸ìª½ â†’ ì•„ì§ ë³‘í•©ë˜ì§€ ì•Šì€ ê²ƒì²˜ëŸ¼ ë³´ì„

### After
```
Similarity
1.0  0.9  0.8  0.7  0.6  0.5  0.4  0.3
â”‚    â”‚
    Step 1 (0.9)
```
Step 1ì˜ ë¹¨ê°„ ì ì„ ì´ ì™¼ìª½ â†’ ì´ë¯¸ ë³‘í•©ëœ ê²ƒì²˜ëŸ¼ ë³´ì„ (ë” ì§ê´€ì )

## ìƒ‰ìƒ êµ¬ë¶„ê³¼ì˜ ê´€ê³„

### Step 1ê¹Œì§€ ì§„í–‰

```
Similarity
1.0  0.9  0.8  0.7  0.6  0.5  0.4  0.3
â”‚    â”‚
Jâ”€â”€â”€â”€T (íŒŒë€ìƒ‰, ì™„ë£Œ)
     â”‚
    Other merges (íšŒìƒ‰, ë¯¸ì™„ë£Œ)
```

- ì˜¤ë¥¸ìª½ (ë†’ì€ similarity): íŒŒë€ìƒ‰ (ì™„ë£Œ)
- ì™¼ìª½ (ë‚®ì€ similarity): íšŒìƒ‰ (ë¯¸ì™„ë£Œ)
- ì§„í–‰ ë°©í–¥: ì˜¤ë¥¸ìª½ â†’ ì™¼ìª½
- **ì‹œê°ì ìœ¼ë¡œ ëª…í™•!**

## ì •ë¦¬

### í•µì‹¬ ì›ë¦¬

**Distance ê¸°ì¤€ (ì›ë˜):**
```
distance ê°’ â†’ dendrogram X ìœ„ì¹˜
0.1 (ì‘ìŒ, leaf) â†’ X=0.1 (ì™¼ìª½)
0.7 (í¼, root) â†’ X=0.7 (ì˜¤ë¥¸ìª½)
```

**Similarity ê¸°ì¤€ (ë³€í™˜ í›„):**
```
similarity ê°’ â†’ dendrogram X ìœ„ì¹˜
0.9 (í¼, leaf) â†’ X=0.9 (ì˜¤ë¥¸ìª½) âœ“
0.3 (ì‘ìŒ, root) â†’ X=0.3 (ì™¼ìª½) âœ“
```

### êµ¬í˜„ ë°©ë²• (ìµœì¢…)

```python
# 1. Distance â†’ Similarity ë³€í™˜
full_linkage[:, 2] = max_sim - full_linkage[:, 2]

# 2. Dendrogram ê·¸ë¦¬ê¸°
dendrogram(full_linkage, ...)
# ìë™ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ê·¸ë ¤ì§!

# 3. Xì¶• ë ˆì´ë¸”
ax.set_xlabel('Similarity')

# âŒ Xì¶• ë°˜ì „ ë¶ˆí•„ìš”! (ì´ì¤‘ ë°˜ì „ í”¼í•˜ê¸°)
```

### íš¨ê³¼

1. **ë…¼ë¦¬ì  ì¼ê´€ì„±**: Similarity ê°’ì´ ë†’ìœ¼ë©´ ì˜¤ë¥¸ìª½, ë‚®ìœ¼ë©´ ì™¼ìª½
2. **ì‹œê°ì  ì§ê´€ì„±**: Tree ë°©í–¥ê³¼ Xì¶• ì˜ë¯¸ê°€ ì¼ì¹˜
3. **Matrixì™€ì˜ ì¼ê´€ì„±**: ê°™ì€ similarity ê°’, ê°™ì€ ì˜ë¯¸
4. **ê°„ë‹¨í•œ êµ¬í˜„**: Linkage ê°’ ë³€í™˜ë§Œìœ¼ë¡œ ì¶©ë¶„

## í…ŒìŠ¤íŠ¸

```bash
$ python acc_gui.py
# Load sample_subordinate.csv
# Navigate through steps
```

**í™•ì¸ í•­ëª©:**
1. âœ… Xì¶• ë ˆì´ë¸”: "Similarity"
2. âœ… Xì¶• ë°©í–¥: 1.0 (ì˜¤ë¥¸ìª½) â†’ 0.0 (ì™¼ìª½)
3. âœ… Leaf nodes: ì˜¤ë¥¸ìª½ ë (high similarity)
4. âœ… Root: ì™¼ìª½ (low similarity)
5. âœ… ë¹¨ê°„ ì ì„ : ì™¼ìª½ìœ¼ë¡œ ì§„í–‰ (step ì¦ê°€)
6. âœ… íŒŒë€ìƒ‰ ë§í¬: ì˜¤ë¥¸ìª½ì—ì„œ ì‹œì‘, ì™¼ìª½ìœ¼ë¡œ í™•ì¥

## ê²°ë¡ 

### ì´ˆê¸° ì‹¤ìˆ˜
- âš ï¸ Linkage ê°’ ë³€í™˜ + Xì¶• ë°˜ì „ = ì´ì¤‘ ë°˜ì „
- âš ï¸ ì›ë˜ëŒ€ë¡œ ëŒì•„ê°€ì„œ ë¬¸ì œ í•´ê²° ì•ˆë¨

### ìµœì¢… í•´ê²°
- âœ… Linkage ê°’ì„ similarityë¡œ ë³€í™˜
- âœ… Xì¶• ë°˜ì „ **ì œê±°**
- âœ… dendrogram()ì´ ìë™ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ê·¸ë¦¼

### íš¨ê³¼
- âœ… Leaf (high similarity) â†’ ì˜¤ë¥¸ìª½
- âœ… Root (low similarity) â†’ ì™¼ìª½
- âœ… Matrixì™€ ì¼ê´€ì„± ìœ ì§€
- âœ… ì§ê´€ì ì´ê³  ë…¼ë¦¬ì 

**ê°„ë‹¨í•œ ê°’ ë³€í™˜ë§Œìœ¼ë¡œ ì˜¬ë°”ë¥¸ ë°©í–¥ì˜ dendrogram ì™„ì„±!**
